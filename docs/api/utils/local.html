<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>jobcontrol.utils.local &mdash; JobControl 0.1a documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="JobControl 0.1a documentation" href="../../index.html" />
    <link rel="up" title="jobcontrol.utils" href="index.html" />
    <link rel="next" title="jobcontrol.utils.testing" href="testing.html" />
    <link rel="prev" title="jobcontrol.utils.depgraph" href="depgraph.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="testing.html" title="jobcontrol.utils.testing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="depgraph.html" title="jobcontrol.utils.depgraph"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">JobControl 0.1a documentation</a> &raquo;</li>
          <li><a href="../index.html" >jobcontrol</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">jobcontrol.utils</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-jobcontrol.utils.local">
<span id="jobcontrol-utils-local"></span><h1>jobcontrol.utils.local<a class="headerlink" href="#module-jobcontrol.utils.local" title="Permalink to this headline">¶</a></h1>
<div class="section" id="werkzeug-local">
<h2>werkzeug.local<a class="headerlink" href="#werkzeug-local" title="Permalink to this headline">¶</a></h2>
<p>This module implements context-local objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body"><ol class="first loweralpha simple" start="3">
<li>2014 by the Werkzeug Team, see AUTHORS for more details.</li>
</ol>
</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body"><p class="first last">BSD, see LICENSE for more details.</p>
</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="jobcontrol.utils.local.implements_bool">
<tt class="descclassname">jobcontrol.utils.local.</tt><tt class="descname">implements_bool</tt><big>(</big><em>cls</em><big>)</big><a class="reference internal" href="../../_modules/jobcontrol/utils/local.html#implements_bool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jobcontrol.utils.local.implements_bool" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="jobcontrol.utils.local.release_local">
<tt class="descclassname">jobcontrol.utils.local.</tt><tt class="descname">release_local</tt><big>(</big><em>local</em><big>)</big><a class="reference internal" href="../../_modules/jobcontrol/utils/local.html#release_local"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jobcontrol.utils.local.release_local" title="Permalink to this definition">¶</a></dt>
<dd><p>Releases the contents of the local for the current context.
This makes it possible to use locals without a manager.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">loc</span> <span class="o">=</span> <span class="n">Local</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loc</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">release_local</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>With this function one can release <a class="reference internal" href="#jobcontrol.utils.local.Local" title="jobcontrol.utils.local.Local"><tt class="xref py py-class docutils literal"><span class="pre">Local</span></tt></a> objects as well
as <a class="reference internal" href="#jobcontrol.utils.local.LocalStack" title="jobcontrol.utils.local.LocalStack"><tt class="xref py py-class docutils literal"><span class="pre">LocalStack</span></tt></a> objects.  However it is not possible to
release data held by proxies that way, one always has to retain
a reference to the underlying local object in order to be able
to release it.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.1.</span></p>
</div>
</dd></dl>

<dl class="class">
<dt id="jobcontrol.utils.local.Local">
<em class="property">class </em><tt class="descclassname">jobcontrol.utils.local.</tt><tt class="descname">Local</tt><a class="reference internal" href="../../_modules/jobcontrol/utils/local.html#Local"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jobcontrol.utils.local.Local" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="jobcontrol.utils.local.LocalStack">
<em class="property">class </em><tt class="descclassname">jobcontrol.utils.local.</tt><tt class="descname">LocalStack</tt><a class="reference internal" href="../../_modules/jobcontrol/utils/local.html#LocalStack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jobcontrol.utils.local.LocalStack" title="Permalink to this definition">¶</a></dt>
<dd><p>This class works similar to a <a class="reference internal" href="#jobcontrol.utils.local.Local" title="jobcontrol.utils.local.Local"><tt class="xref py py-class docutils literal"><span class="pre">Local</span></tt></a> but keeps a stack
of objects instead.  This is best explained with an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ls</span> <span class="o">=</span> <span class="n">LocalStack</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ls</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ls</span><span class="o">.</span><span class="n">top</span>
<span class="go">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ls</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ls</span><span class="o">.</span><span class="n">top</span>
<span class="go">23</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ls</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">23</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ls</span><span class="o">.</span><span class="n">top</span>
<span class="go">42</span>
</pre></div>
</div>
<p>They can be force released by using a <tt class="xref py py-class docutils literal"><span class="pre">LocalManager</span></tt> or with
the <a class="reference internal" href="#jobcontrol.utils.local.release_local" title="jobcontrol.utils.local.release_local"><tt class="xref py py-func docutils literal"><span class="pre">release_local()</span></tt></a> function but the correct way is to pop the
item from the stack after using.  When the stack is empty it will
no longer be bound to the current context (and as such released).</p>
<p>By calling the stack without arguments it returns a proxy that resolves to
the topmost item on the stack.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.1.</span></p>
</div>
<dl class="method">
<dt id="jobcontrol.utils.local.LocalStack.push">
<tt class="descname">push</tt><big>(</big><em>obj</em><big>)</big><a class="reference internal" href="../../_modules/jobcontrol/utils/local.html#LocalStack.push"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jobcontrol.utils.local.LocalStack.push" title="Permalink to this definition">¶</a></dt>
<dd><p>Pushes a new item to the stack</p>
</dd></dl>

<dl class="method">
<dt id="jobcontrol.utils.local.LocalStack.pop">
<tt class="descname">pop</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/jobcontrol/utils/local.html#LocalStack.pop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jobcontrol.utils.local.LocalStack.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the topmost item from the stack, will return the
old value or <cite>None</cite> if the stack was already empty.</p>
</dd></dl>

<dl class="attribute">
<dt id="jobcontrol.utils.local.LocalStack.top">
<tt class="descname">top</tt><a class="reference internal" href="../../_modules/jobcontrol/utils/local.html#LocalStack.top"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jobcontrol.utils.local.LocalStack.top" title="Permalink to this definition">¶</a></dt>
<dd><p>The topmost item on the stack.  If the stack is empty,
<cite>None</cite> is returned.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="jobcontrol.utils.local.LocalProxy">
<em class="property">class </em><tt class="descclassname">jobcontrol.utils.local.</tt><tt class="descname">LocalProxy</tt><big>(</big><em>local</em>, <em>name=None</em><big>)</big><a class="reference internal" href="../../_modules/jobcontrol/utils/local.html#LocalProxy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#jobcontrol.utils.local.LocalProxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Acts as a proxy for a werkzeug local.  Forwards all operations to
a proxied object.  The only operations not supported for forwarding
are right handed operands and any kind of assignment.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">werkzeug.local</span> <span class="kn">import</span> <span class="n">Local</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">Local</span><span class="p">()</span>

<span class="c"># these are proxies</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">l</span><span class="p">(</span><span class="s">&#39;request&#39;</span><span class="p">)</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">l</span><span class="p">(</span><span class="s">&#39;user&#39;</span><span class="p">)</span>


<span class="kn">from</span> <span class="nn">werkzeug.local</span> <span class="kn">import</span> <span class="n">LocalStack</span>
<span class="n">_response_local</span> <span class="o">=</span> <span class="n">LocalStack</span><span class="p">()</span>

<span class="c"># this is a proxy</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">_response_local</span><span class="p">()</span>
</pre></div>
</div>
<p>Whenever something is bound to l.user / l.request the proxy objects
will forward all operations.  If no object is bound a <tt class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></tt>
will be raised.</p>
<p>To create proxies to <a class="reference internal" href="#jobcontrol.utils.local.Local" title="jobcontrol.utils.local.Local"><tt class="xref py py-class docutils literal"><span class="pre">Local</span></tt></a> or <a class="reference internal" href="#jobcontrol.utils.local.LocalStack" title="jobcontrol.utils.local.LocalStack"><tt class="xref py py-class docutils literal"><span class="pre">LocalStack</span></tt></a> objects,
call the object as shown above.  If you want to have a proxy to an
object looked up by a function, you can (as of Werkzeug 0.6.1) pass
a function to the <a class="reference internal" href="#jobcontrol.utils.local.LocalProxy" title="jobcontrol.utils.local.LocalProxy"><tt class="xref py py-class docutils literal"><span class="pre">LocalProxy</span></tt></a> constructor:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">session</span> <span class="o">=</span> <span class="n">LocalProxy</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">get_current_request</span><span class="p">()</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.6.1: </span>The class can be instanciated with a callable as well now.</p>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">jobcontrol.utils.local</a><ul>
<li><a class="reference internal" href="#werkzeug-local">werkzeug.local</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="depgraph.html"
                        title="previous chapter">jobcontrol.utils.depgraph</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="testing.html"
                        title="next chapter">jobcontrol.utils.testing</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/api/utils/local.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="testing.html" title="jobcontrol.utils.testing"
             >next</a> |</li>
        <li class="right" >
          <a href="depgraph.html" title="jobcontrol.utils.depgraph"
             >previous</a> |</li>
        <li><a href="../../index.html">JobControl 0.1a documentation</a> &raquo;</li>
          <li><a href="../index.html" >jobcontrol</a> &raquo;</li>
          <li><a href="index.html" >jobcontrol.utils</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Samuele Santi.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>